<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nepal Gold & Silver Rate | Live Prices & 25+ Years History</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <style>
    :root {
      --gold-primary: #D4AF37;
      --gold-light: #F5E6A3;
      --gold-gradient: linear-gradient(135deg, #D4AF37 0%, #F5E6A3 50%, #D4AF37 100%);
      --gold-bg: rgba(212, 175, 55, 0.1);
      --silver-primary: #C0C0C0;
      --silver-light: #E8E8E8;
      --silver-gradient: linear-gradient(135deg, #A8A8A8 0%, #E8E8E8 50%, #A8A8A8 100%);
      --silver-bg: rgba(192, 192, 192, 0.1);
      --green: #22C55E;
      --red: #EF4444;
      --bg-dark: #0A0A0B;
      --bg-card: #141416;
      --bg-elevated: #1C1C1F;
      --text-primary: #FFFFFF;
      --text-secondary: #9A9A9A;
      --text-muted: #5A5A5A;
      --border-subtle: rgba(255, 255, 255, 0.06);
      --border-accent: rgba(212, 175, 55, 0.3);
      --border-silver: rgba(192, 192, 192, 0.25);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'DM Sans', sans-serif; background: var(--bg-dark); color: var(--text-primary); min-height: 100vh; }
    .bg-gradient { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; background: radial-gradient(ellipse at 20% 20%, rgba(212, 175, 55, 0.06) 0%, transparent 50%), radial-gradient(ellipse at 80% 80%, rgba(192, 192, 192, 0.04) 0%, transparent 50%); pointer-events: none; }
    
    header { position: sticky; top: 0; z-index: 100; padding: 16px 40px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-subtle); backdrop-filter: blur(20px); background: rgba(10, 10, 11, 0.9); }
    .logo { display: flex; align-items: center; gap: 14px; }
    .logo-icon { width: 42px; height: 42px; background: var(--gold-gradient); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; box-shadow: 0 4px 20px rgba(212, 175, 55, 0.3); }
    .logo-text { font-family: 'Cormorant Garamond', serif; font-size: 22px; font-weight: 600; }
    .logo-text .gold { color: var(--gold-primary); }
    .logo-text .silver { color: var(--silver-primary); }
    .header-right { display: flex; align-items: center; gap: 16px; }
    .nav-tabs { display: flex; gap: 4px; background: var(--bg-elevated); padding: 4px; border-radius: 10px; }
    .nav-tab { padding: 8px 16px; background: transparent; border: none; border-radius: 8px; font-size: 13px; font-weight: 500; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; font-family: 'DM Sans', sans-serif; }
    .nav-tab:hover { color: var(--text-primary); }
    .nav-tab.active { background: var(--gold-gradient); color: var(--bg-dark); }
    .live-indicator { display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 100px; font-size: 11px; font-weight: 600; color: var(--green); letter-spacing: 1.5px; }
    .live-dot { width: 8px; height: 8px; background: var(--green); border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(1.3); } }

    main { position: relative; z-index: 5; max-width: 1600px; margin: 0 auto; padding: 32px 40px 80px; }
    .page-section { display: none; }
    .page-section.active { display: block; animation: fadeIn 0.4s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* Stats Bar */
    .stats-bar { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; }
    @media (max-width: 1200px) { .stats-bar { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 600px) { .stats-bar { grid-template-columns: 1fr; } }
    .stat-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 20px 24px; display: flex; align-items: center; gap: 16px; transition: all 0.3s; }
    .stat-card:hover { border-color: var(--border-accent); transform: translateY(-2px); }
    .stat-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; }
    .gold-stat .stat-icon { background: var(--gold-bg); }
    .silver-stat .stat-icon { background: var(--silver-bg); }
    .stat-content { flex: 1; }
    .stat-label { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
    .stat-value { font-family: 'Cormorant Garamond', serif; font-size: 26px; font-weight: 700; }
    .gold-stat .stat-value { color: var(--gold-primary); }
    .silver-stat .stat-value { color: var(--silver-primary); }
    .stat-change { font-size: 12px; font-weight: 600; margin-top: 4px; display: flex; align-items: center; gap: 4px; }
    .stat-change.up { color: var(--green); }
    .stat-change.down { color: var(--red); }

    /* Price Grid */
    .price-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 32px; }
    @media (max-width: 900px) { .price-grid { grid-template-columns: 1fr; } }
    .price-group { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 20px; padding: 24px; }
    .price-group:hover { border-color: var(--border-accent); }
    .group-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border-subtle); }
    .group-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; }
    .gold-group .group-icon { background: var(--gold-gradient); }
    .silver-group .group-icon { background: var(--silver-gradient); }
    .group-title { font-family: 'Cormorant Garamond', serif; font-size: 20px; font-weight: 600; }
    .gold-group .group-title { color: var(--gold-primary); }
    .silver-group .group-title { color: var(--silver-primary); }
    .price-list { display: flex; flex-direction: column; gap: 10px; }
    .price-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 14px; background: var(--bg-elevated); border-radius: 10px; }
    .price-item-label { font-size: 14px; font-weight: 500; }
    .price-item-sub { font-size: 11px; color: var(--text-muted); }
    .price-item-value { font-family: 'Cormorant Garamond', serif; font-size: 18px; font-weight: 700; }
    .gold-group .price-item-value { color: var(--gold-primary); }
    .silver-group .price-item-value { color: var(--silver-primary); }
    .price-item-usd { font-size: 10px; color: var(--text-muted); }

    /* Chart Section */
    .chart-section { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 20px; padding: 28px; margin-bottom: 32px; }
    .chart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px; }
    .chart-title { font-family: 'Cormorant Garamond', serif; font-size: 24px; font-weight: 600; }
    .chart-subtitle { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }
    .chart-controls { display: flex; gap: 12px; flex-wrap: wrap; }
    .chart-tabs { display: flex; gap: 4px; background: var(--bg-elevated); padding: 4px; border-radius: 10px; }
    .chart-tab { padding: 8px 16px; background: transparent; border: none; border-radius: 8px; font-size: 13px; font-weight: 500; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; font-family: 'DM Sans', sans-serif; }
    .chart-tab:hover { color: var(--text-primary); }
    .chart-tab.active { background: var(--gold-gradient); color: var(--bg-dark); }
    .chart-tab.active-silver { background: var(--silver-gradient); color: var(--bg-dark); }
    .time-filters { display: flex; gap: 4px; }
    .time-btn { padding: 8px 12px; background: var(--bg-elevated); border: 1px solid transparent; border-radius: 8px; font-size: 12px; font-weight: 500; color: var(--text-muted); cursor: pointer; transition: all 0.2s; font-family: 'DM Sans', sans-serif; }
    .time-btn:hover { color: var(--text-secondary); border-color: var(--border-subtle); }
    .time-btn.active { background: var(--bg-card); border-color: var(--gold-primary); color: var(--gold-primary); }
    .chart-container { height: 400px; position: relative; }
    .chart-legend { display: flex; justify-content: center; gap: 24px; margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-subtle); }
    .legend-item { display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary); }
    .legend-dot { width: 12px; height: 12px; border-radius: 50%; }
    .legend-dot.gold { background: var(--gold-primary); }
    .legend-dot.silver { background: var(--silver-primary); }

    /* Analysis Cards */
    .analysis-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 24px; }
    @media (max-width: 900px) { .analysis-grid { grid-template-columns: 1fr; } }
    .analysis-card { background: var(--bg-elevated); border-radius: 16px; padding: 20px; }
    .analysis-title { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
    .analysis-value { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 700; color: var(--gold-primary); }
    .analysis-value.silver { color: var(--silver-primary); }
    .analysis-detail { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }

    /* Calculator */
    .calculator-section { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 20px; padding: 32px; }
    .calc-title { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 600; margin-bottom: 8px; }
    .calc-subtitle { font-size: 14px; color: var(--text-secondary); margin-bottom: 28px; }
    .calculator-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; align-items: end; }
    @media (max-width: 900px) { .calculator-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 500px) { .calculator-grid { grid-template-columns: 1fr; } }
    .form-group { display: flex; flex-direction: column; gap: 10px; }
    .form-label { font-size: 12px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
    .form-input, .form-select { background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 16px 20px; font-size: 15px; color: var(--text-primary); font-family: 'DM Sans', sans-serif; transition: all 0.3s; width: 100%; }
    .form-input:focus, .form-select:focus { outline: none; border-color: var(--gold-primary); }
    .form-select { cursor: pointer; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%239A9A9A' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 16px center; padding-right: 48px; }
    .form-select option { background: var(--bg-card); color: var(--text-primary); }
    .btn-calculate { background: var(--gold-gradient); border: none; border-radius: 12px; padding: 16px 32px; font-size: 15px; font-weight: 600; color: var(--bg-dark); cursor: pointer; transition: all 0.3s; font-family: 'DM Sans', sans-serif; }
    .btn-calculate:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(212, 175, 55, 0.4); }
    .result-box { margin-top: 28px; padding: 28px; background: linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(212, 175, 55, 0.02) 100%); border: 1px solid var(--border-accent); border-radius: 16px; display: none; align-items: center; justify-content: space-between; }
    .result-box.active { display: flex; }
    .result-box.silver-result { background: linear-gradient(135deg, rgba(192, 192, 192, 0.08) 0%, rgba(192, 192, 192, 0.02) 100%); border-color: var(--border-silver); }
    .result-label { font-size: 13px; color: var(--text-secondary); }
    .result-detail { font-size: 14px; color: var(--text-muted); margin-top: 4px; }
    .result-value { font-family: 'Cormorant Garamond', serif; font-size: 42px; font-weight: 700; background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .result-box.silver-result .result-value { background: var(--silver-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

    /* History Table */
    .history-section { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 20px; padding: 28px; margin-top: 32px; }
    .table-container { overflow-x: auto; margin-top: 20px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 14px 16px; text-align: left; border-bottom: 1px solid var(--border-subtle); }
    th { font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; background: var(--bg-elevated); }
    th:first-child { border-radius: 8px 0 0 8px; }
    th:last-child { border-radius: 0 8px 8px 0; }
    td { font-size: 14px; color: var(--text-primary); }
    tr:hover td { background: rgba(255,255,255,0.02); }
    .year-cell { font-weight: 600; color: var(--gold-primary); }
    .change-up { color: var(--green); }
    .change-down { color: var(--red); }

    /* Info Footer */
    .info-footer { display: flex; justify-content: center; gap: 40px; padding: 24px; margin-top: 32px; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; flex-wrap: wrap; }
    .info-item { display: flex; align-items: center; gap: 12px; }
    .info-icon { width: 36px; height: 36px; background: var(--bg-elevated); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--gold-primary); }
    .info-text { display: flex; flex-direction: column; }
    .info-label { font-size: 11px; color: var(--text-muted); text-transform: uppercase; }
    .info-value { font-size: 14px; font-weight: 600; }

    footer { position: relative; z-index: 5; text-align: center; padding: 32px; border-top: 1px solid var(--border-subtle); }
    .footer-text { font-size: 12px; color: var(--text-muted); line-height: 1.8; }
    .footer-text a { color: var(--gold-primary); text-decoration: none; }

    @keyframes priceFlash { 0% { background: rgba(212, 175, 55, 0.3); } 100% { background: transparent; } }
    .price-updated { animation: priceFlash 0.8s ease-out; }

    @media (max-width: 768px) {
      header { padding: 12px 20px; flex-wrap: wrap; gap: 12px; }
      main { padding: 20px 16px 60px; }
      .nav-tabs { order: 3; width: 100%; justify-content: center; }
      .result-box { flex-direction: column; text-align: center; gap: 16px; }
    }
  </style>
</head>
<body>
  <div class="bg-gradient"></div>
  
  <header>
    <div class="logo">
      <div class="logo-icon">‚öú</div>
      <div class="logo-text"><span class="gold">Gold</span> & <span class="silver">Silver</span> Nepal</div>
    </div>
    <div class="nav-tabs">
      <button class="nav-tab active" onclick="showPage('today')">Today's Price</button>
      <button class="nav-tab" onclick="showPage('history')">Historical Data</button>
      <button class="nav-tab" onclick="showPage('calculator')">Calculator</button>
    </div>
    <div class="header-right">
      <div class="live-indicator"><span class="live-dot"></span>LIVE</div>
    </div>
  </header>

  <main>
    <!-- TODAY'S PRICE PAGE -->
    <section id="todayPage" class="page-section active">
      <div class="stats-bar">
        <div class="stat-card gold-stat">
          <div class="stat-icon">ü•á</div>
          <div class="stat-content">
            <div class="stat-label">Fine Gold / Tola</div>
            <div class="stat-value" id="statGoldTola">NPR 1,72,500</div>
            <div class="stat-change up" id="goldChange">‚Üë +0.32% today</div>
          </div>
        </div>
        <div class="stat-card gold-stat">
          <div class="stat-icon">‚ú¶</div>
          <div class="stat-content">
            <div class="stat-label">Tejabi Gold / Tola</div>
            <div class="stat-value" id="statGoldTejabi">NPR 1,71,637</div>
            <div class="stat-change up">‚Üë +0.32% today</div>
          </div>
        </div>
        <div class="stat-card silver-stat">
          <div class="stat-icon">ü•à</div>
          <div class="stat-content">
            <div class="stat-label">Silver / Tola</div>
            <div class="stat-value" id="statSilverTola">NPR 2,050</div>
            <div class="stat-change up" id="silverChange">‚Üë +0.49% today</div>
          </div>
        </div>
        <div class="stat-card silver-stat">
          <div class="stat-icon">‚óà</div>
          <div class="stat-content">
            <div class="stat-label">Exchange Rate</div>
            <div class="stat-value" id="statExchange">NPR 136.50</div>
            <div class="stat-change">per 1 USD</div>
          </div>
        </div>
      </div>

      <div class="price-grid">
        <div class="price-group gold-group">
          <div class="group-header">
            <div class="group-icon">ü•á</div>
            <h3 class="group-title">Gold Prices (Per Unit)</h3>
          </div>
          <div class="price-list">
            <div class="price-item">
              <div><div class="price-item-label">Fine Gold (99.99%)</div><div class="price-item-sub">Per Tola (11.664g)</div></div>
              <div style="text-align:right"><div class="price-item-value" id="goldFineTola">NPR 1,72,500</div><div class="price-item-usd">‚âà $1,264</div></div>
            </div>
            <div class="price-item">
              <div><div class="price-item-label">Tejabi Gold (99.50%)</div><div class="price-item-sub">Per Tola</div></div>
              <div style="text-align:right"><div class="price-item-value" id="goldTejabiTola">NPR 1,71,637</div><div class="price-item-usd">‚âà $1,257</div></div>
            </div>
            <div class="price-item">
              <div><div class="price-item-label">Fine Gold</div><div class="price-item-sub">Per 10 Grams</div></div>
              <div style="text-align:right"><div class="price-item-value" id="goldFine10g">NPR 1,47,870</div><div class="price-item-usd">‚âà $1,083</div></div>
            </div>
            <div class="price-item">
              <div><div class="price-item-label">Fine Gold</div><div class="price-item-sub">Per 1 Gram</div></div>
              <div style="text-align:right"><div class="price-item-value" id="goldFine1g">NPR 14,787</div><div class="price-item-usd">‚âà $108</div></div>
            </div>
          </div>
        </div>

        <div class="price-group silver-group">
          <div class="group-header">
            <div class="group-icon">ü•à</div>
            <h3 class="group-title">Silver Prices (Per Unit)</h3>
          </div>
          <div class="price-list">
            <div class="price-item">
              <div><div class="price-item-label">Pure Silver (99.9%)</div><div class="price-item-sub">Per Tola (11.664g)</div></div>
              <div style="text-align:right"><div class="price-item-value" id="silverTola">NPR 2,050</div><div class="price-item-usd">‚âà $15.02</div></div>
            </div>
            <div class="price-item">
              <div><div class="price-item-label">Pure Silver</div><div class="price-item-sub">Per 10 Grams</div></div>
              <div style="text-align:right"><div class="price-item-value" id="silver10g">NPR 1,757</div><div class="price-item-usd">‚âà $12.87</div></div>
            </div>
            <div class="price-item">
              <div><div class="price-item-label">Pure Silver</div><div class="price-item-sub">Per 100 Grams</div></div>
              <div style="text-align:right"><div class="price-item-value" id="silver100g">NPR 17,570</div><div class="price-item-usd">‚âà $128.72</div></div>
            </div>
            <div class="price-item">
              <div><div class="price-item-label">Pure Silver</div><div class="price-item-sub">Per Kilogram</div></div>
              <div style="text-align:right"><div class="price-item-value" id="silverKg">NPR 1,75,700</div><div class="price-item-usd">‚âà $1,287</div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Live Chart -->
      <div class="chart-section">
        <div class="chart-header">
          <div>
            <h2 class="chart-title">Live Price Movement</h2>
            <p class="chart-subtitle">Real-time price tracking (simulated for demo)</p>
          </div>
          <div class="chart-controls">
            <div class="chart-tabs">
              <button class="chart-tab active" id="liveChartGold" onclick="switchLiveChart('gold')">Gold</button>
              <button class="chart-tab" id="liveChartSilver" onclick="switchLiveChart('silver')">Silver</button>
              <button class="chart-tab" id="liveChartBoth" onclick="switchLiveChart('both')">Both</button>
            </div>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="liveChart"></canvas>
        </div>
        <div class="chart-legend">
          <div class="legend-item"><span class="legend-dot gold"></span>Gold (NPR/Tola)</div>
          <div class="legend-item"><span class="legend-dot silver"></span>Silver (NPR/Tola √ó 50)</div>
        </div>
      </div>

      <div class="info-footer">
        <div class="info-item">
          <div class="info-icon">üïê</div>
          <div class="info-text"><span class="info-label">Last Updated</span><span class="info-value" id="lastUpdate">--</span></div>
        </div>
        <div class="info-item">
          <div class="info-icon">üìä</div>
          <div class="info-text"><span class="info-label">Data Source</span><span class="info-value">Nepal Rastra Bank / FENEGOSIDA</span></div>
        </div>
        <div class="info-item">
          <div class="info-icon">üîÑ</div>
          <div class="info-text"><span class="info-label">Auto Refresh</span><span class="info-value">Every 10 seconds</span></div>
        </div>
      </div>
    </section>

    <!-- HISTORICAL DATA PAGE -->
    <section id="historyPage" class="page-section">
      <div class="chart-section">
        <div class="chart-header">
          <div>
            <h2 class="chart-title">25+ Years Gold & Silver Price History</h2>
            <p class="chart-subtitle">Historical prices in Nepal from 1999 to 2025</p>
          </div>
          <div class="chart-controls">
            <div class="chart-tabs">
              <button class="chart-tab active" id="histChartGold" onclick="switchHistoryChart('gold')">Gold</button>
              <button class="chart-tab" id="histChartSilver" onclick="switchHistoryChart('silver')">Silver</button>
              <button class="chart-tab" id="histChartBoth" onclick="switchHistoryChart('both')">Both</button>
            </div>
            <div class="time-filters">
              <button class="time-btn" onclick="setHistoryRange('5y')">5Y</button>
              <button class="time-btn" onclick="setHistoryRange('10y')">10Y</button>
              <button class="time-btn" onclick="setHistoryRange('15y')">15Y</button>
              <button class="time-btn active" onclick="setHistoryRange('all')">All</button>
            </div>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="historyChart"></canvas>
        </div>
        <div class="chart-legend">
          <div class="legend-item"><span class="legend-dot gold"></span>Gold (NPR/Tola)</div>
          <div class="legend-item"><span class="legend-dot silver"></span>Silver (NPR/Tola)</div>
        </div>

        <div class="analysis-grid">
          <div class="analysis-card">
            <div class="analysis-title">Gold - All Time High</div>
            <div class="analysis-value" id="goldATH">NPR 1,72,500</div>
            <div class="analysis-detail">January 2025</div>
          </div>
          <div class="analysis-card">
            <div class="analysis-title">Gold - 25 Year Return</div>
            <div class="analysis-value" id="goldReturn">+2,485%</div>
            <div class="analysis-detail">From NPR 6,680 (1999)</div>
          </div>
          <div class="analysis-card">
            <div class="analysis-title">Gold - Avg Annual Growth</div>
            <div class="analysis-value" id="goldCAGR">13.4%</div>
            <div class="analysis-detail">Compound Annual Growth Rate</div>
          </div>
          <div class="analysis-card">
            <div class="analysis-title">Silver - All Time High</div>
            <div class="analysis-value silver" id="silverATH">NPR 2,050</div>
            <div class="analysis-detail">January 2025</div>
          </div>
          <div class="analysis-card">
            <div class="analysis-title">Silver - 25 Year Return</div>
            <div class="analysis-value silver" id="silverReturn">+1,564%</div>
            <div class="analysis-detail">From NPR 123 (1999)</div>
          </div>
          <div class="analysis-card">
            <div class="analysis-title">Silver - Avg Annual Growth</div>
            <div class="analysis-value silver" id="silverCAGR">11.6%</div>
            <div class="analysis-detail">Compound Annual Growth Rate</div>
          </div>
        </div>
      </div>

      <div class="history-section">
        <div class="chart-header">
          <div>
            <h2 class="chart-title">Yearly Price Data (1999-2025)</h2>
            <p class="chart-subtitle">Average annual gold and silver prices in Nepal</p>
          </div>
        </div>
        <div class="table-container">
          <table id="historyTable">
            <thead>
              <tr>
                <th>Year</th>
                <th>Gold (NPR/Tola)</th>
                <th>Gold Change</th>
                <th>Silver (NPR/Tola)</th>
                <th>Silver Change</th>
                <th>USD/NPR Rate</th>
              </tr>
            </thead>
            <tbody id="historyTableBody">
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- CALCULATOR PAGE -->
    <section id="calculatorPage" class="page-section">
      <div class="calculator-section">
        <h2 class="calc-title">Precious Metals Calculator</h2>
        <p class="calc-subtitle">Calculate the current value of gold or silver based on weight</p>
        <div class="calculator-grid">
          <div class="form-group">
            <label class="form-label">Metal Type</label>
            <select class="form-select" id="metalSelect" onchange="updateUnitOptions()">
              <option value="gold">Gold</option>
              <option value="silver">Silver</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Weight</label>
            <input type="number" class="form-input" id="weightInput" placeholder="Enter weight" value="1" min="0" step="0.01">
          </div>
          <div class="form-group">
            <label class="form-label">Unit & Purity</label>
            <select class="form-select" id="unitSelect">
              <option value="tola-fine">Tola - Fine Gold (99.99%)</option>
              <option value="tola-tejabi">Tola - Tejabi Gold (99.50%)</option>
              <option value="gram-fine">Gram - Fine Gold (99.99%)</option>
              <option value="gram-tejabi">Gram - Tejabi Gold (99.50%)</option>
              <option value="kg-fine">Kilogram - Fine Gold</option>
            </select>
          </div>
          <button class="btn-calculate" onclick="calculate()">Calculate Value</button>
        </div>
        <div class="result-box" id="resultBox">
          <div>
            <div class="result-label">Estimated Value</div>
            <div class="result-detail" id="resultDetail">1 Tola √ó NPR 1,72,500/Tola</div>
          </div>
          <div class="result-value" id="resultValue">NPR 1,72,500</div>
        </div>
      </div>

      <!-- Investment Calculator -->
      <div class="calculator-section" style="margin-top: 24px;">
        <h2 class="calc-title">Investment Growth Calculator</h2>
        <p class="calc-subtitle">See how your gold investment would have grown over time</p>
        <div class="calculator-grid">
          <div class="form-group">
            <label class="form-label">Investment Amount (NPR)</label>
            <input type="number" class="form-input" id="investAmount" placeholder="e.g. 100000" value="100000" min="0">
          </div>
          <div class="form-group">
            <label class="form-label">Investment Year</label>
            <select class="form-select" id="investYear">
              <option value="1999">1999</option>
              <option value="2000">2000</option>
              <option value="2005">2005</option>
              <option value="2010" selected>2010</option>
              <option value="2015">2015</option>
              <option value="2020">2020</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Metal</label>
            <select class="form-select" id="investMetal">
              <option value="gold">Gold</option>
              <option value="silver">Silver</option>
            </select>
          </div>
          <button class="btn-calculate" onclick="calculateInvestment()">Calculate Growth</button>
        </div>
        <div class="result-box" id="investResultBox">
          <div>
            <div class="result-label">Today's Value</div>
            <div class="result-detail" id="investDetail">NPR 1,00,000 invested in 2010</div>
          </div>
          <div class="result-value" id="investValue">NPR 4,31,250</div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p class="footer-text">
      Historical data compiled from Nepal Rastra Bank, FENEGOSIDA, and international gold markets.<br>
      Prices are indicative. Actual jeweler prices may vary. ¬© 2025 Nepal Gold & Silver Rate
    </p>
  </footer>

  <script>
    // ==================== HISTORICAL DATA (1999-2025) ====================
    // Gold prices in NPR per Tola (average annual prices for Nepal)
    const historicalData = [
      { year: 1999, gold: 6680, silver: 123, usdRate: 68.2 },
      { year: 2000, gold: 6850, silver: 128, usdRate: 71.1 },
      { year: 2001, gold: 7150, silver: 115, usdRate: 74.6 },
      { year: 2002, gold: 7850, silver: 125, usdRate: 77.9 },
      { year: 2003, gold: 8950, silver: 138, usdRate: 76.1 },
      { year: 2004, gold: 10200, silver: 178, usdRate: 73.7 },
      { year: 2005, gold: 11050, silver: 195, usdRate: 71.4 },
      { year: 2006, gold: 14500, silver: 285, usdRate: 72.3 },
      { year: 2007, gold: 16800, silver: 345, usdRate: 66.0 },
      { year: 2008, gold: 21500, silver: 380, usdRate: 69.8 },
      { year: 2009, gold: 26200, silver: 425, usdRate: 77.6 },
      { year: 2010, gold: 40000, silver: 620, usdRate: 73.3 },
      { year: 2011, gold: 52500, silver: 1150, usdRate: 74.0 },
      { year: 2012, gold: 56000, silver: 980, usdRate: 85.2 },
      { year: 2013, gold: 52000, silver: 750, usdRate: 93.0 },
      { year: 2014, gold: 49500, silver: 610, usdRate: 99.4 },
      { year: 2015, gold: 48000, silver: 540, usdRate: 102.4 },
      { year: 2016, gold: 54500, silver: 650, usdRate: 107.4 },
      { year: 2017, gold: 57000, silver: 680, usdRate: 104.5 },
      { year: 2018, gold: 58500, silver: 620, usdRate: 109.0 },
      { year: 2019, gold: 68000, silver: 720, usdRate: 112.6 },
      { year: 2020, gold: 92500, silver: 1050, usdRate: 118.3 },
      { year: 2021, gold: 98500, silver: 1320, usdRate: 118.1 },
      { year: 2022, gold: 108000, silver: 1180, usdRate: 125.2 },
      { year: 2023, gold: 125000, silver: 1450, usdRate: 132.5 },
      { year: 2024, gold: 152000, silver: 1750, usdRate: 133.8 },
      { year: 2025, gold: 172500, silver: 2050, usdRate: 136.5 }
    ];

    // Current prices (latest data point)
    let currentPrices = {
      goldFineTola: 172500,
      goldTejabiTola: 171637,
      silverTola: 2050,
      exchangeRate: 136.5,
      lastUpdated: new Date()
    };

    // Live chart data
    let liveChartData = { gold: [], silver: [] };
    let liveChart = null;
    let historyChart = null;
    let currentHistoryRange = 'all';
    let currentHistoryMode = 'gold';
    let currentLiveMode = 'gold';

    // Constants
    const GRAMS_PER_TOLA = 11.6638;
    const TEJABI_PURITY = 0.995;

    // ==================== UTILITY FUNCTIONS ====================
    function formatNPR(num) {
      return 'NPR ' + new Intl.NumberFormat('en-IN').format(Math.round(num));
    }

    function formatNumber(num) {
      return new Intl.NumberFormat('en-IN').format(Math.round(num));
    }

    // ==================== PAGE NAVIGATION ====================
    function showPage(page) {
      document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      
      document.getElementById(page + 'Page').classList.add('active');
      event.target.classList.add('active');
    }

    // ==================== LIVE CHART ====================
    function initLiveChart() {
      const ctx = document.getElementById('liveChart').getContext('2d');
      
      // Initialize with some data points
      const now = Date.now();
      for (let i = 60; i >= 0; i--) {
        const time = now - i * 10000;
        const goldVariation = (Math.random() - 0.5) * 500;
        const silverVariation = (Math.random() - 0.5) * 20;
        liveChartData.gold.push({ x: time, y: currentPrices.goldFineTola + goldVariation });
        liveChartData.silver.push({ x: time, y: (currentPrices.silverTola + silverVariation) * 50 }); // Scaled for visibility
      }

      liveChart = new Chart(ctx, {
        type: 'line',
        data: {
          datasets: [{
            label: 'Gold (NPR/Tola)',
            data: liveChartData.gold,
            borderColor: '#D4AF37',
            backgroundColor: 'rgba(212, 175, 55, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.4,
            pointRadius: 0
          }, {
            label: 'Silver (NPR/Tola √ó 50)',
            data: liveChartData.silver,
            borderColor: '#C0C0C0',
            backgroundColor: 'rgba(192, 192, 192, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.4,
            pointRadius: 0,
            hidden: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: { intersect: false, mode: 'index' },
          plugins: { legend: { display: false } },
          scales: {
            x: {
              type: 'time',
              time: { unit: 'minute', displayFormats: { minute: 'HH:mm' } },
              grid: { color: 'rgba(255,255,255,0.03)' },
              ticks: { color: '#5A5A5A', maxTicksLimit: 8 }
            },
            y: {
              position: 'right',
              grid: { color: 'rgba(255,255,255,0.03)' },
              ticks: { color: '#5A5A5A', callback: v => formatNumber(v) }
            }
          }
        }
      });
    }

    function switchLiveChart(mode) {
      currentLiveMode = mode;
      document.querySelectorAll('#todayPage .chart-tab').forEach(t => t.classList.remove('active', 'active-silver'));
      
      if (mode === 'gold') {
        document.getElementById('liveChartGold').classList.add('active');
        liveChart.data.datasets[0].hidden = false;
        liveChart.data.datasets[1].hidden = true;
      } else if (mode === 'silver') {
        document.getElementById('liveChartSilver').classList.add('active-silver');
        liveChart.data.datasets[0].hidden = true;
        liveChart.data.datasets[1].hidden = false;
      } else {
        document.getElementById('liveChartBoth').classList.add('active');
        liveChart.data.datasets[0].hidden = false;
        liveChart.data.datasets[1].hidden = false;
      }
      liveChart.update();
    }

    function updateLiveChart() {
      const now = Date.now();
      const goldVariation = (Math.random() - 0.5) * 300;
      const silverVariation = (Math.random() - 0.5) * 15;
      
      // Update current prices with small variations
      currentPrices.goldFineTola += goldVariation;
      currentPrices.goldTejabiTola = currentPrices.goldFineTola * TEJABI_PURITY;
      currentPrices.silverTola += silverVariation;
      
      // Keep prices within reasonable bounds
      currentPrices.goldFineTola = Math.max(170000, Math.min(175000, currentPrices.goldFineTola));
      currentPrices.silverTola = Math.max(2000, Math.min(2100, currentPrices.silverTola));
      
      liveChartData.gold.push({ x: now, y: currentPrices.goldFineTola });
      liveChartData.silver.push({ x: now, y: currentPrices.silverTola * 50 });
      
      if (liveChartData.gold.length > 100) {
        liveChartData.gold.shift();
        liveChartData.silver.shift();
      }
      
      liveChart.update('none');
      updatePriceDisplay();
    }

    function updatePriceDisplay() {
      currentPrices.lastUpdated = new Date();
      
      // Update stats
      document.getElementById('statGoldTola').textContent = formatNPR(currentPrices.goldFineTola);
      document.getElementById('statGoldTejabi').textContent = formatNPR(currentPrices.goldTejabiTola);
      document.getElementById('statSilverTola').textContent = formatNPR(currentPrices.silverTola);
      
      // Update price cards
      document.getElementById('goldFineTola').textContent = formatNPR(currentPrices.goldFineTola);
      document.getElementById('goldTejabiTola').textContent = formatNPR(currentPrices.goldTejabiTola);
      document.getElementById('goldFine10g').textContent = formatNPR(currentPrices.goldFineTola / GRAMS_PER_TOLA * 10);
      document.getElementById('goldFine1g').textContent = formatNPR(currentPrices.goldFineTola / GRAMS_PER_TOLA);
      
      document.getElementById('silverTola').textContent = formatNPR(currentPrices.silverTola);
      document.getElementById('silver10g').textContent = formatNPR(currentPrices.silverTola / GRAMS_PER_TOLA * 10);
      document.getElementById('silver100g').textContent = formatNPR(currentPrices.silverTola / GRAMS_PER_TOLA * 100);
      document.getElementById('silverKg').textContent = formatNPR(currentPrices.silverTola / GRAMS_PER_TOLA * 1000);
      
      // Update timestamp
      document.getElementById('lastUpdate').textContent = currentPrices.lastUpdated.toLocaleTimeString('en-US', {
        hour: '2-digit', minute: '2-digit', second: '2-digit'
      });
      
      // Update change indicators (random for demo)
      const goldChange = ((Math.random() - 0.48) * 0.8).toFixed(2);
      const silverChange = ((Math.random() - 0.48) * 1.2).toFixed(2);
      
      document.getElementById('goldChange').className = `stat-change ${goldChange >= 0 ? 'up' : 'down'}`;
      document.getElementById('goldChange').textContent = `${goldChange >= 0 ? '‚Üë' : '‚Üì'} ${goldChange >= 0 ? '+' : ''}${goldChange}% today`;
      
      document.getElementById('silverChange').className = `stat-change ${silverChange >= 0 ? 'up' : 'down'}`;
      document.getElementById('silverChange').textContent = `${silverChange >= 0 ? '‚Üë' : '‚Üì'} ${silverChange >= 0 ? '+' : ''}${silverChange}% today`;
    }

    // ==================== HISTORY CHART ====================
    function initHistoryChart() {
      const ctx = document.getElementById('historyChart').getContext('2d');
      
      historyChart = new Chart(ctx, {
        type: 'line',
        data: {
          datasets: [{
            label: 'Gold (NPR/Tola)',
            data: historicalData.map(d => ({ x: new Date(d.year, 0, 1), y: d.gold })),
            borderColor: '#D4AF37',
            backgroundColor: 'rgba(212, 175, 55, 0.15)',
            borderWidth: 3,
            fill: true,
            tension: 0.3,
            pointRadius: 4,
            pointBackgroundColor: '#D4AF37',
            pointHoverRadius: 8
          }, {
            label: 'Silver (NPR/Tola)',
            data: historicalData.map(d => ({ x: new Date(d.year, 0, 1), y: d.silver })),
            borderColor: '#C0C0C0',
            backgroundColor: 'rgba(192, 192, 192, 0.15)',
            borderWidth: 3,
            fill: true,
            tension: 0.3,
            pointRadius: 4,
            pointBackgroundColor: '#C0C0C0',
            pointHoverRadius: 8,
            hidden: true,
            yAxisID: 'y1'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: { intersect: false, mode: 'index' },
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: 'rgba(20, 20, 22, 0.95)',
              padding: 12,
              callbacks: {
                title: (items) => `Year: ${new Date(items[0].raw.x).getFullYear()}`,
                label: (ctx) => `${ctx.dataset.label}: ${formatNPR(ctx.raw.y)}`
              }
            }
          },
          scales: {
            x: {
              type: 'time',
              time: { unit: 'year', displayFormats: { year: 'yyyy' } },
              grid: { color: 'rgba(255,255,255,0.03)' },
              ticks: { color: '#5A5A5A' }
            },
            y: {
              position: 'left',
              grid: { color: 'rgba(255,255,255,0.03)' },
              ticks: { color: '#D4AF37', callback: v => formatNumber(v) },
              title: { display: true, text: 'Gold (NPR)', color: '#D4AF37' }
            },
            y1: {
              position: 'right',
              grid: { display: false },
              ticks: { color: '#C0C0C0', callback: v => formatNumber(v) },
              title: { display: true, text: 'Silver (NPR)', color: '#C0C0C0' },
              display: false
            }
          }
        }
      });
      
      populateHistoryTable();
    }

    function switchHistoryChart(mode) {
      currentHistoryMode = mode;
      document.querySelectorAll('#historyPage .chart-tabs .chart-tab').forEach(t => t.classList.remove('active', 'active-silver'));
      
      if (mode === 'gold') {
        document.getElementById('histChartGold').classList.add('active');
        historyChart.data.datasets[0].hidden = false;
        historyChart.data.datasets[1].hidden = true;
        historyChart.options.scales.y.display = true;
        historyChart.options.scales.y1.display = false;
      } else if (mode === 'silver') {
        document.getElementById('histChartSilver').classList.add('active-silver');
        historyChart.data.datasets[0].hidden = true;
        historyChart.data.datasets[1].hidden = false;
        historyChart.options.scales.y.display = false;
        historyChart.options.scales.y1.display = true;
      } else {
        document.getElementById('histChartBoth').classList.add('active');
        historyChart.data.datasets[0].hidden = false;
        historyChart.data.datasets[1].hidden = false;
        historyChart.options.scales.y.display = true;
        historyChart.options.scales.y1.display = true;
      }
      historyChart.update();
    }

    function setHistoryRange(range) {
      currentHistoryRange = range;
      document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
      event.target.classList.add('active');
      
      let startYear;
      const currentYear = new Date().getFullYear();
      
      switch(range) {
        case '5y': startYear = currentYear - 5; break;
        case '10y': startYear = currentYear - 10; break;
        case '15y': startYear = currentYear - 15; break;
        default: startYear = 1999;
      }
      
      const filtered = historicalData.filter(d => d.year >= startYear);
      historyChart.data.datasets[0].data = filtered.map(d => ({ x: new Date(d.year, 0, 1), y: d.gold }));
      historyChart.data.datasets[1].data = filtered.map(d => ({ x: new Date(d.year, 0, 1), y: d.silver }));
      historyChart.update();
    }

    function populateHistoryTable() {
      const tbody = document.getElementById('historyTableBody');
      tbody.innerHTML = '';
      
      // Reverse to show newest first
      const reversedData = [...historicalData].reverse();
      
      reversedData.forEach((data, idx) => {
        const prevData = reversedData[idx + 1];
        const goldChange = prevData ? ((data.gold - prevData.gold) / prevData.gold * 100).toFixed(1) : '-';
        const silverChange = prevData ? ((data.silver - prevData.silver) / prevData.silver * 100).toFixed(1) : '-';
        
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="year-cell">${data.year}</td>
          <td>${formatNPR(data.gold)}</td>
          <td class="${goldChange > 0 ? 'change-up' : goldChange < 0 ? 'change-down' : ''}">${goldChange !== '-' ? (goldChange > 0 ? '+' : '') + goldChange + '%' : '-'}</td>
          <td>${formatNPR(data.silver)}</td>
          <td class="${silverChange > 0 ? 'change-up' : silverChange < 0 ? 'change-down' : ''}">${silverChange !== '-' ? (silverChange > 0 ? '+' : '') + silverChange + '%' : '-'}</td>
          <td>${data.usdRate.toFixed(1)}</td>
        `;
        tbody.appendChild(row);
      });
    }

    // ==================== CALCULATOR ====================
    function updateUnitOptions() {
      const metal = document.getElementById('metalSelect').value;
      const unitSelect = document.getElementById('unitSelect');
      
      if (metal === 'gold') {
        unitSelect.innerHTML = `
          <option value="tola-fine">Tola - Fine Gold (99.99%)</option>
          <option value="tola-tejabi">Tola - Tejabi Gold (99.50%)</option>
          <option value="gram-fine">Gram - Fine Gold (99.99%)</option>
          <option value="gram-tejabi">Gram - Tejabi Gold (99.50%)</option>
          <option value="kg-fine">Kilogram - Fine Gold</option>
        `;
      } else {
        unitSelect.innerHTML = `
          <option value="tola-pure">Tola - Pure Silver (99.9%)</option>
          <option value="gram-pure">Gram - Pure Silver</option>
          <option value="kg-pure">Kilogram - Pure Silver</option>
        `;
      }
      calculate();
    }

    function calculate() {
      const weight = parseFloat(document.getElementById('weightInput').value) || 0;
      const metal = document.getElementById('metalSelect').value;
      const [unit, purity] = document.getElementById('unitSelect').value.split('-');
      
      let pricePerUnit = 0;
      let unitLabel = '';
      let purityLabel = '';

      if (metal === 'gold') {
        const isFine = purity === 'fine';
        purityLabel = isFine ? '99.99%' : '99.50%';
        const basePrice = isFine ? currentPrices.goldFineTola : currentPrices.goldTejabiTola;
        
        if (unit === 'tola') {
          pricePerUnit = basePrice;
          unitLabel = 'Tola';
        } else if (unit === 'gram') {
          pricePerUnit = basePrice / GRAMS_PER_TOLA;
          unitLabel = 'Gram';
        } else {
          pricePerUnit = (basePrice / GRAMS_PER_TOLA) * 1000;
          unitLabel = 'Kg';
        }
      } else {
        purityLabel = '99.9%';
        if (unit === 'tola') {
          pricePerUnit = currentPrices.silverTola;
          unitLabel = 'Tola';
        } else if (unit === 'gram') {
          pricePerUnit = currentPrices.silverTola / GRAMS_PER_TOLA;
          unitLabel = 'Gram';
        } else {
          pricePerUnit = (currentPrices.silverTola / GRAMS_PER_TOLA) * 1000;
          unitLabel = 'Kg';
        }
      }

      const totalValue = weight * pricePerUnit;
      const resultBox = document.getElementById('resultBox');
      resultBox.classList.add('active');
      resultBox.classList.toggle('silver-result', metal === 'silver');
      
      document.getElementById('resultValue').textContent = formatNPR(totalValue);
      document.getElementById('resultDetail').textContent = `${weight} ${unitLabel} √ó ${formatNPR(pricePerUnit)}/${unitLabel} (${purityLabel})`;
    }

    function calculateInvestment() {
      const amount = parseFloat(document.getElementById('investAmount').value) || 0;
      const year = parseInt(document.getElementById('investYear').value);
      const metal = document.getElementById('investMetal').value;
      
      const yearData = historicalData.find(d => d.year === year);
      const currentData = historicalData[historicalData.length - 1];
      
      if (!yearData) return;
      
      const oldPrice = metal === 'gold' ? yearData.gold : yearData.silver;
      const newPrice = metal === 'gold' ? currentData.gold : currentData.silver;
      
      const unitsOwned = amount / oldPrice;
      const currentValue = unitsOwned * newPrice;
      const growth = ((currentValue - amount) / amount * 100).toFixed(1);
      
      const resultBox = document.getElementById('investResultBox');
      resultBox.classList.add('active');
      resultBox.classList.toggle('silver-result', metal === 'silver');
      
      document.getElementById('investValue').textContent = formatNPR(currentValue);
      document.getElementById('investDetail').textContent = `${formatNPR(amount)} invested in ${year} ‚Üí +${growth}% return (${unitsOwned.toFixed(2)} Tola ${metal})`;
    }

    // Event listeners for calculator
    document.getElementById('weightInput').addEventListener('input', calculate);
    document.getElementById('unitSelect').addEventListener('change', calculate);
    document.getElementById('metalSelect').addEventListener('change', updateUnitOptions);
    document.getElementById('investAmount').addEventListener('input', calculateInvestment);
    document.getElementById('investYear').addEventListener('change', calculateInvestment);
    document.getElementById('investMetal').addEventListener('change', calculateInvestment);

    // ==================== INITIALIZATION ====================
    document.addEventListener('DOMContentLoaded', function() {
      initLiveChart();
      initHistoryChart();
      updatePriceDisplay();
      calculate();
      calculateInvestment();
      
      // Auto-refresh every 10 seconds
      setInterval(updateLiveChart, 10000);
    });
  </script>
</body>
</html>
